<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.javalec.ex.Dao.EDao">

	<select id="event_list" resultType="com.javalec.ex.Dto.EDto.EventDto">
		<![CDATA[select * from (select rownum rnum, E_CODE,E_TYPE,E_APPLY,E_TITLE,E_CONTENT,E_FILE1,E_FILE2,E_FILE3,E_START,
		E_END,E_WDATE,E_UDATE from (select * from event e order by E_CODE desc)) where rnum>=#{param1} and rnum<=#{param2}]]>
	</select>
	<select id="getListCount" resultType="Integer">
		SELECT count(*) as count FROM event
	</select>
	<select id="getCommentCount" resultType="Integer">
		SELECT count(*) as count FROM event_comment where e_code=#{param1}
	</select>
	<select id="event_view" resultType="com.javalec.ex.Dto.EDto.EventDto">
		SELECT * FROM event WHERE e_code=#{param1}
	</select>
	<select id="event_comment" resultType="com.javalec.ex.Dto.EDto.Event_commentDto">
		<![CDATA[select * from (select rownum rnum, ec_num,e_code,id,ec_content,ec_wdate,ec_udate
		from (select * from event_comment ec where e_code=#{param1} order by ec_wdate desc))
        event where rnum>=#{param2} and rnum<=#{param3}]]>
	</select>
	<update id="eModify_comment" >
		update EVENT_COMMENT set EC_CONTENT=#{param2}, EC_UDATE=sysdate where EC_NUM=#{param1}
	</update>

</mapper>